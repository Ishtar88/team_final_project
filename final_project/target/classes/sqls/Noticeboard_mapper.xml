<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jsr.project.notice">

	<resultMap type="com.jsr.project.dtos.NoticeBoardDto" id	="NoticeBoardDto">
		<result property="n_seq" column="N_SEQ"/>
		<result property="id" column="ID"/>
		<result property="n_title" column="N_TITLE"/>
		<result property="n_content" column="N_CONTENT"/>
		<result property="n_regDate" column="N_REGDATE"/>
		<result property="n_readcount" column="N_READCOUNT"/>
		<result property="n_delflag" column="N_DELFLAG"/>
	</resultMap>

<!-- 	글 목록 조회하기 -->
	<select id="noticeboard" resultType="NoticeBoardDto">
		SELECT N_SEQ, ID, N_TITLE, N_REGDATE, N_READCOUNT
		FROM NOTICE
	</select>

<!-- 	글 상세 조회하기 -->
	<select id="n_detailboard" resultType="NoticeBoardDto" parameterType="int">
		SELECT N_SEQ, ID, N_TITLE, N_CONTENT, N_REGDATE,
		N_READCOUNT FROM NOTICE WHERE N_SEQ=#{n_seq}
	</select>
	
<!-- 	새로운 글 입력하기  -->
	<insert id="n_insertboard" parameterType="NoticeBoardDto">
		INSERT INTO NOTICE 
		(N_SEQ, N_TITLE, N_CONTENT, N_REGDATE, 
		N_READCOUNT, N_DELFLAG)
		VALUES
		(N_SEQ.NEXTVAL, #{n_title}, #{n_content}, SYSDATE,
		0, 'N')
	</insert>
	
<!-- 	글 수정하기  -->
	<update id="n_updateboard" parameterType="NoticeBoardDto">
	UPDATE NOTICE SET N_TITLE=#{n_title}, N_CONTENT=#{n_content}, 
	N_REGDATE=SYSDATE WHERE N_SEQ=#{n_seq}
	</update>

<!-- 조횟수 증가 -->

	<update id="n_readcount">
		UPDATE NOTICE SET N_READCOUNT=N_READCOUNT+1 WHERE N_SEQ=#{n_seq}
	</update>

<!-- 한개의 글 삭제하기 -->

	<update id="n_deleteboard" parameterType="NoticeBoardDto">
		UPDATE NOTICE SET N_DELFLAG='Y' WHERE N_SEQ=#{n_seq}
	</update>
	
<!-- 	여러개의 글 삭제하기 (동적쿼리)-->
	<update id="n_muldelboard" parameterType="Map">
		UPDATE NOTICE SET N_DELFLAGE='Y' WHERE SEQ IN 
		<foreach collection="n_seqs" item="n_seq" open="(" close=")" separator=",">
			#{n_seq}
		</foreach>
	</update>

<!-- ajax 처리  -->
	<select id="n_detailAjax" parameterType="int" resultType="NoticeBoardDto">
		SELECT N_SEQ, N_TITLE, N_CONTENT, N_REGDATE, N_READCOUNT, N_DELFLAG
		FROM NOTICE WHERE N_SEQ=#{n_seq}
	</select>





</mapper>